services:
  ollama:
    image: ollama/ollama:0.5.7
    ports:
      - "11434:11434"

  isynkgr_hybrid:
    build:
      context: ../..
      dockerfile: docker/sut/isynkgr_hybrid/Dockerfile
    environment:
      DATASET_DIR: ${DATASET_DIR:-/data/crosswalk}
      OUTPUT_DIR: ${OUTPUT_DIR:-/out}
      CONFIG_PATH: ${CONFIG_PATH:-/config/config.json}
      SUT_MODE: isynkgr_hybrid
      OLLAMA_BASE_URL: ${OLLAMA_BASE_URL:-http://ollama:11434}
    volumes:
      - ../../datasets/v1:/data
      - ../../results:/out
      - ../../benchmark:/config
    depends_on:
      - ollama

  llm_only:
    build:
      context: ../..
      dockerfile: docker/sut/llm_only/Dockerfile
    environment:
      DATASET_DIR: ${DATASET_DIR:-/data/crosswalk}
      OUTPUT_DIR: ${OUTPUT_DIR:-/out}
      CONFIG_PATH: ${CONFIG_PATH:-/config/config.json}
      SUT_MODE: llm_only
      OLLAMA_BASE_URL: ${OLLAMA_BASE_URL:-http://ollama:11434}
    volumes:
      - ../../datasets/v1:/data
      - ../../results:/out
      - ../../benchmark:/config
    depends_on:
      - ollama

  rag_only:
    build:
      context: ../..
      dockerfile: docker/sut/rag_only/Dockerfile
    environment:
      DATASET_DIR: ${DATASET_DIR:-/data/crosswalk}
      OUTPUT_DIR: ${OUTPUT_DIR:-/out}
      CONFIG_PATH: ${CONFIG_PATH:-/config/config.json}
      SUT_MODE: rag_only
      OLLAMA_BASE_URL: ${OLLAMA_BASE_URL:-http://ollama:11434}
    volumes:
      - ../../datasets/v1:/data
      - ../../results:/out
      - ../../benchmark:/config
    depends_on:
      - ollama

  rule_only:
    build:
      context: ../..
      dockerfile: docker/sut/rule_only/Dockerfile
    environment:
      DATASET_DIR: ${DATASET_DIR:-/data/crosswalk}
      OUTPUT_DIR: ${OUTPUT_DIR:-/out}
      CONFIG_PATH: ${CONFIG_PATH:-/config/config.json}
      SUT_MODE: rule_only
    volumes:
      - ../../datasets/v1:/data
      - ../../results:/out
      - ../../benchmark:/config

  graph_only:
    build:
      context: ../..
      dockerfile: docker/sut/graph_only/Dockerfile
    environment:
      DATASET_DIR: ${DATASET_DIR:-/data/crosswalk}
      OUTPUT_DIR: ${OUTPUT_DIR:-/out}
      CONFIG_PATH: ${CONFIG_PATH:-/config/config.json}
      SUT_MODE: graph_only
    volumes:
      - ../../datasets/v1:/data
      - ../../results:/out
      - ../../benchmark:/config
